# üöÄ ML Detection Service

> –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç ‚Äî —Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö.\
> –í –æ—Å–Ω–æ–≤–µ –ª–µ–∂–∏—Ç YOLO –¥–ª—è –æ–±—â–µ–π –¥–µ—Ç–µ–∫—Ü–∏–∏ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–µ–π—Ä–æ—Å–µ—Ç—å EfficientNet, –≤—ã—Å—Ç—É–ø–∞—é—â–∞—è —ç–∫—Å–ø–µ—Ä—Ç–æ–º –ø–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—é –æ—Ç–≤–µ—Ä—Ç–æ–∫.
>
> –í–µ—Å—å –ø–∞–π–ø–ª–∞–π–Ω —Å–æ–±—Ä–∞–Ω –≤ FastAPI-—Å–µ—Ä–≤–∏—Å, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥–µ–ª—å –∫–∞–∫ –≥–æ—Ç–æ–≤—ã–π REST API.\
> –ú—ã —É–¥–µ–ª–∏–ª–∏ –≤–Ω–∏–º–∞–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã, —Å–æ—Ö—Ä–∞–Ω–∏–≤ –ø—Ä–∏ —ç—Ç–æ–º —É–¥–æ–±—Å—Ç–≤–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* ‚ö° **–ë—ã—Å—Ç—Ä—ã–π REST API** –Ω–∞ –±–∞–∑–µ FastAPI

* üß† **YOLO-–¥–µ—Ç–µ–∫—Ç–æ—Ä** –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤

* üîß **EfficientNet-—ç–∫—Å–ø–µ—Ä—Ç**  –∏ —ç–º–±–µ–¥–¥–µ—Ä –¥–ª—è ¬´—Ç—Ä—É–¥–Ω—ã—Ö¬ª –∫–µ–π—Å–æ–≤

* üì¶ **Docker-—Å–±–æ—Ä–∫–∞** –¥–ª—è –ª—ë–≥–∫–æ–≥–æ –¥–µ–ø–ª–æ—è

---

## üèÉ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

{% list tabs %}

- Linux/MacOS

  ### üîπ –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

  ```bash
  cd ML-Service
  
  # –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (venv)
  python3 -m venv venv
  
  # –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
  source venv/bin/activate
  
  # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
  pip install --upgrade pip
  pip install -r requirements.txt
  
  # –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
  python main.py
  ```

- Windows

  ### üîπ –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

  ```bash
  cd ML-Service
  
  # –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (venv)
  python3 -m venv venv
  
  # –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
  venv\Scripts\activate
  
  # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
  pip install --upgrade pip
  pip install -r requirements.txt
  
  # –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
  python main.py
  ```

{% endlist %}

## üîπ –ó–∞–ø—É—Å–∫ –≤ Docker

```bash
docker build -t ml_service .
docker run -p 8000:8000 ml_service
```

---

## üì° Api

–û–±—Ä–∞—â–µ–Ω–∏–µ –∫ —ç–Ω–¥–ø–æ–∏–Ω—Ç—É –ø—Ä–µ–¥–∏–∫—Ç–∞ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:

```http
GET http://{HOST}:{PORT}/api/v1/predict/?image_id={image_id, str}&url={image_url}&thresh={threshold, float}
```

–ü—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –ø–æ 127.0.0.1 –≤ –ø–æ–ª—É image\_url –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –¥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.

–û—Ç–≤–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON:

```json
{
"instruments": [
  {
    "bbox": [
      3787.427734375,
      1443.26416015625,
      4833.0146484375,
      2827.8193359375
    ],
    "class": 1,
    "confidence": 0.9444190859794617,
    "embedding": []
  },
  {
    "bbox": [
      3142.17724609375,
      780.5576171875,
      4768.83740234375,
      1782.2603759765625
    ],
    "class": 10,
    "confidence": 0.9379329681396484,
    "embedding": []
  },
  ...
],
"debug_image": BASE64_IMAGE,
"image_id": "abc123"
}
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ñ–∞–π–ª config.py. 

---

## üêí –ê–≤—Ç–æ—Ä—Å—Ç–≤–æ

*  **–ß–µ–ø–µ–ª—å –ò–ª—å—è** ‚Äî backend & ML